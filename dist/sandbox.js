!function(e,r){if("object"==typeof exports&&"object"==typeof module)module.exports=r();else if("function"==typeof define&&define.amd)define([],r);else{var t=r();for(var n in t)("object"==typeof exports?exports:e)[n]=t[n]}}(window,(function(){return function(e){var r={};function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var i in e)t.d(n,i,function(r){return e[r]}.bind(null,i));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=0)}([function(e,r,t){"use strict";t.r(r),t.d(r,"sandbox",(function(){return O}));var n={parse(e){var r=this.lexical_ary,t=this.priority;if(!r)return null;for(var n=e.length,s=0,o=[];s<n;){for(var u=null,p="",l=0,a=r.length;l<a;l++){var f=r[l],c=e.match(f.lex_reg);if(c&&0===c.index)if(t===i.priority.HEAD_FIRST){if(!u){u=c,p=f.lex_type;break}}else t===i.priority.LONG_FIRST?(!u||c[0].length>u[0].length)&&(u=c,p=f.lex_type):t===i.priority.SHORT_FIRST&&(!u||c[0].length<u[0].length)&&(u=c,p=f.lex_type)}if(!u)return null;if("IGNORE"!==p&&o.push(new i.token(u[0],p)),e=e.substring(u[0].length),0==u[0].length)return null;s+=u[0].length}return o},destroy(){for(var e=0,r=lexical_ary.length;e<r;e++)this.lexical_ary[e]=null;this.lexical_ary=null}};function i(e,r){this.lexical_ary=e,this.priority=r,r===i.priority.TAIL_FIRST&&(e=e.slice(0).reverse(),r=i.priority.HEAD_FIRST),e.forEach((function(e,r){"^"!==e.lex_reg.source[0]&&(e.lex_reg=new RegExp("^"+e.lex_reg.source))}))}i.prototype=n,i.priority={HEAD_FIRST:1,TAIL_FIRST:2,LONG_FIRST:3,SHORT_FIRST:4},i.token=function(e,r){this.lexeme=e,this.type=r};var s=i;function o(){0}function u(){if(1===arguments.length)return arguments[0];for(var e=[],r=0,t=arguments.length;r<t;r++)e[r]=arguments[r];return e}function p(e,r){return new s.token("privateSymbol"+r+"_"+e,"GRAMMAR_SYM")}function l(e,r,t){return[e,r,t]}var a=new s([{lex_type:"GRAMMAR_EMPTY",lex_reg:/GRAMMAR_EMPTY/},{lex_type:"GRAMMAR_ZERO_OR_MORE",lex_reg:/\*/},{lex_type:"GRAMMAR_ONE_OR_MORE",lex_reg:/\+/},{lex_type:"GRAMMAR_ZERO_OR_ONE",lex_reg:/\?/},{lex_type:"GRAMMAR_LEFT_BRACKET",lex_reg:/\(/},{lex_type:"GRAMMAR_RIGHT_BRACKET",lex_reg:/\)/},{lex_type:"GRAMMAR_OR",lex_reg:/\|/},{lex_type:"GRAMMAR_QUOTE_SYM",lex_reg:/'[^\s]+?'/},{lex_type:"GRAMMAR_SYM",lex_reg:/[^\s]+/},{lex_type:"IGNORE",lex_reg:/\s+/}],s.priority.HEAD_FIRST);class f{constructor(e){this.val=e}}var c={items:function(){for(var e=this.I,r=this.grammar,t=this.ACTION,n=this.GOTO,i=this.id2entity,s=this.IMapCache,o=this.starterpi,u=this.followSet,p=0;p<e.length;p++){this.closure(e[p]);var a={};for(var f in e[p].forEach((function(e){var t=e,n=r[i[t[0]]][0][t[1]];if(n.length>t[2]){var s=n[t[2]],o=l(t[0],t[1],t[2]+1);a[s.lexeme]=a[s.lexeme]||[],a[s.lexeme].push(o)}})),n[p]=n[p]||{},a){var c=a[f].join("|");void 0!==s[c]?n[p][f]=s[c]:(n[p][f]=s[c]=e.length,e.push(a[f]))}}for(var p in n)for(var f in t[p]=t[p]||{},n[p])t[p][f]=t[p][f]||[],t[p][f].push(["p",n[p][f]]);for(p in e)t[p]=t[p]||{},e[p].forEach((function(e){var n=e,s=i[n[0]];if(r[s][0][n[1]].length===n[2]){if(s===o)return void(t[p].GRAMMAR_END=["a"]);u[s].forEach((function(r){t[p][r]=t[p][r]||[],t[p][r].push(["r"].concat(e))}))}}))},closure:function(e){for(var r=this.grammar,t=this.closureMap,n=this.id2entity,i=this.entity2id,s=0;s<e.length;s++){var o=e[s],u=r[n[o[0]]][0][o[1]][o[2]];if(u&&void 0!==i[u.lexeme])if(t[u.lexeme])t[u.lexeme].forEach((function(r){e.indexOf(r)<0&&e.push(r)}));else{t[u.lexeme]=[];for(var p=0,a=r[u.lexeme][0].length;p<a;p++){var f=l(i[u.lexeme],p,0);t[u.lexeme].push(f),e.indexOf(f)<0&&e.push(f)}}}},flatten:function(e){function r(e){var r=[];return e.forEach((function(t){t.forEach((function(t){t instanceof Array?e.indexOf(t)<0&&r.indexOf(t)<0&&r.push(t):r.indexOf(t)<0&&r.push(t)}))})),r}var t=[],n=[];for(var i in e)if(!(n.indexOf(e[i])>=0))for(;;){for(t.push(e[i]);t.length;){for(var s=!1,o=t[t.length-1],u=0,p=o.length;u<p;u++)if(o[u]instanceof Array){if(s=!0,t.indexOf(o[u])>=0){var l=[],a=t.indexOf(o[u]);for(u=t.length-1;u>=a;u--)l.push(t[u]),t.pop();var f=r(l);l.forEach((function(r){for(var t in e)e[t]===r?e[t]=f:e[t].indexOf(r)>=0&&e[t].splice(e[t].indexOf(r),1,f)}))}else t.push(o[u]);break}if(!s){n.indexOf(o)<0&&n.push(o);var c=t[t.length-2];c&&(o.forEach((function(e){c.indexOf(e)<0&&c.push(e)})),c.splice(c.indexOf(o),1)),t.pop()}}if(n.indexOf(e[i])>=0)break}},first:function(e,r){var t=this.firstSet,n=this.firstCycle,i=this.grammar,s=this.emptySet;if(t[e])return t[e];if(r.indexOf(e)>=0){for(var o=0,u=n.length;o<u;o++){for(var p=0,l=r.length;p<l&&!(n[o].indexOf(r[p])>=0);p++);if(p<l){r.slice(r.indexOf(e)).forEach((function(e){n[o].indexOf(e)<0&&n[o].push(e)}));break}}return o===u&&n.push(r.slice(r.indexOf(e))),[]}if(e in i){r.push(e);var a=i[e][0],f=[];return s[e]&&f.push("GRAMMAR_EMPTY"),a.forEach(t=>{for(var n=0,i=t.length;n<i;n++){if(t[n].lexeme!==e)this.first(t[n].lexeme,r).forEach((function(e){"GRAMMAR_EMPTY"!==e&&(f.indexOf(e)>=0||f.push(e))}));if(!s[t[n].lexeme])return}}),t[e]=f,r.pop(),t[e]}return t[e]=[e],t[e]},follow:function(e){var r=this.grammar,t=this.followSet;r[e][0].forEach(n=>{for(var i=0,s=n.length-1;i<s;i++)if(n[i].lexeme in r){var o=n[i].lexeme,u=i+1;t[o]=t[o]||[];var p=t[o];do{var l=this.first(n[u].lexeme,[]);l.forEach((function(e){"GRAMMAR_EMPTY"!==e&&p.indexOf(e)<0&&p.push(e)})),u++}while(u<s&&l.indexOf("GRAMMAR_EMPTY")>=0);this.tailEmpty(n,i+1)&&(t[e]=t[e]||[],t[o].indexOf(t[e])<0&&t[o].push(t[e]))}if(n[n.length-1].lexeme in r){o=n[n.length-1].lexeme;t[o]=t[o]||[],t[e]=t[e]||[],t[o].indexOf(t[e])<0&&t[o].push(t[e])}})},tailEmpty:function(e,r){for(var t=this.emptySet,n=r,i=e.length;n<i;n++)if(!t[e[n].lexeme])return!1;return!0},empty:function(e){var r=this.emptySet,t=this.grammar;if(e in r)return r[e];for(var n=t[e][0],i=[],s=0,o=n.length;s<o;s++){if("GRAMMAR_EMPTY"===n[s][0].type)return!0;for(var u=n[s].map((function(e){return r[e.lexeme]})),p=!1,l=0,a=u.length;l<a;l++){if(!1===u[l]){p=!1;break}void 0===u[l]&&(p=void 0)}if(l===a&&void 0!==p)return!0;i.push(p)}for(s=0,o=i.length;s<o;s++)if(void 0===i[s])return;return!1},checkSymbol:function(e){var r=this.symbollist,t=this.grammar,n={};e.forEach((function(e){n[e.lex_type]=1})),r.forEach((function(e){if(!(e in n)&&!(e in t))throw new Error(e+" is not defined")}))},EBNFParse1:function(){var e=this.grammar;for(var r in e){var t=a.parse(e[r][0]);t.forEach((function(e){"GRAMMAR_QUOTE_SYM"===e.type&&(e.type="GRAMMAR_SYM",e.lexeme=e.lexeme.substring(1,e.lexeme.length-1))})),e[r][0]=t}},EBNFParse2:function(){var e=this.grammar,r=this.privateSymbolMap,t=this.privateSymbolid;function n(i){for(var s=0;s<i.length;s++)if("GRAMMAR_LEFT_BRACKET"===i[s].type){for(var o=0,l=[],a=i.length,f=s+1;!(f>=a||0===o&&"GRAMMAR_RIGHT_BRACKET"===i[f].type);)l.push(i[f]),"GRAMMAR_LEFT_BRACKET"===i[f].type&&o++,"GRAMMAR_RIGHT_BRACKET"===i[f].type&&o--,f++;if(f>=a)throw new Error("grammar driver error");var c=r[l.map((function(e){return e.lexeme})).join("")];c||(c=p("group",t++),r[l.map((function(e){return e.lexeme})).join("")]=c,e[c.lexeme]=[],e[c.lexeme][0]=l,e[c.lexeme][1]=u,n(e[c.lexeme][0])),i.splice(s,f-s+1,c),s--}}for(var i in e)n(e[i][0]);return t},EBNFParse3:function(){var e=this.grammar;for(var r in e){var t=e[r][0];e[r][0]=[];var n=[];t.forEach((function(t){"GRAMMAR_OR"===t.type?(e[r][0].push(n),n=[]):n.push(t)})),n.length&&e[r][0].push(n)}},EBNFParse4:function(){var e=this.grammar,r=this.privateSymbolMap,t=this.privateSymbolid;function n(i){for(var o=0;o<i.length;o++)if(("GRAMMAR_ZERO_OR_MORE"===i[o].type||"GRAMMAR_ONE_OR_MORE"===i[o].type||"GRAMMAR_ZERO_OR_ONE"===i[o].type)&&i[o-1]){var l=r[i[o-1].lexeme+i[o].lexeme];l?i.splice(o-1,2,l):(l=p("list",t++),r[i[o-1].lexeme+i[o].lexeme]=l,e[l.lexeme]=[],"GRAMMAR_ZERO_OR_MORE"===i[o].type?e[l.lexeme][0]=[[new s.token(i[o-1].lexeme,"GRAMMAR_SYM"),new s.token(l.lexeme,"GRAMMAR_SYM")],[new s.token("GRAMMAR_EMPTY","GRAMMAR_EMPTY")],[u,function(){return"GRAMMAR_EMPTY"}]]:"GRAMMAR_ONE_OR_MORE"===i[o].type?e[l.lexeme][0]=[[new s.token(i[o-1].lexeme,"GRAMMAR_SYM"),new s.token(l.lexeme,"GRAMMAR_SYM")],[new s.token(i[o-1].lexeme,"GRAMMAR_SYM")],[u,function(){return"GRAMMAR_EMPTY"}]]:"GRAMMAR_ZERO_OR_ONE"===i[o].type&&(e[l.lexeme][0]=[[new s.token(i[o-1].lexeme,"GRAMMAR_SYM")],[new s.token("GRAMMAR_EMPTY","GRAMMAR_EMPTY")],[u,function(){return"GRAMMAR_EMPTY"}]]),i.splice(o-1,2,l),e[l.lexeme][0].forEach((function(e){n(e)}))),o--}}for(var i in e)e[i][0].forEach((function(e){n(e)}));return t},parse:function(e){var r=this.grammar,t=this.ACTION,n=this.GOTO,i=this.tokenizer.parse(e),u=this.id2entity;if(o("tokenlist",i),!i||!i.length)return null;i.push(new s.token("","GRAMMAR_END"));for(var p=[],l=[],a=null,c=[0],x=0,h=0,m=i.length,E=i[0];;){if(h===m-1&&t[c[x]].GRAMMAR_END&&"a"===t[c[x]].GRAMMAR_END[0]){console.log("accept"),p=[];break}var _=void 0,y=null;if(void 0!==t[c[x]][E.type]?(_=t[c[x]][E.type],y=E):void 0!==t[c[x]].GRAMMAR_EMPTY&&(_=t[c[x]].GRAMMAR_EMPTY,y=new s.token("GRAMMAR_EMPTY","GRAMMAR_EMPTY")),void 0===_){for(;p.length;){var g=p[p.length-1];if(g.cur!==g.actlist.length-1){o("again"),c=g.stack,h=g.i,x=c.length-1,E=i[h],y=g.n,g.cur++,a=g.actlist[g.cur],l=g.symbolStack;break}"GRAMMAR_EMPTY"!==g.n.type&&void 0!==t[g.stack[g.stack.length-1]].GRAMMAR_EMPTY?(g.n=new s.token("GRAMMAR_EMPTY","GRAMMAR_EMPTY"),g.actlist=t[g.stack[g.stack.length-1]].GRAMMAR_EMPTY,g.cur=-1):p.pop()}if(!p.length){console.log("error"),p=[];break}}else p.push({actlist:_,i:h,n:y,stack:c.slice(0),cur:0,symbolStack:l.slice(0)}),a=_[0];if("p"===a[0])c.push(parseInt(a[1])),o("push",y.lexeme),l.push(new f(y.lexeme)),x++,"GRAMMAR_EMPTY"!=y.type&&++h<m&&(E=i[h]);else if("r"===a[0]){var R=u[parseInt(a[1],10)];o("reduce",R);var M=parseInt(a[2],10),A=r[R][0][M],d=null;"function"==typeof r[R][1]?d=r[R][1]:r[R][1]instanceof Array?d=r[R][1][M]:void 0===r[R][1]&&(d=function(){return arguments[0]});for(var v=A.length,b=[];v--;)b.push(l.pop()),c.pop(),x--;var S=d.apply(null,b.reverse().map((function(e){return e.val})));n[c[x]][R]&&(l.push(new f(S)),c.push(n[c[x]][R]),x++)}}return l[0].val},destroy:function(){for(var e in this.tokenizer.destroy(),this.tokenizer=null,this.lexer.destroy(),this.lexer=null,this.GOTO=null,this.ACTION=null,grammar)this.grammar[e]=null}};function x(e,r,t,n){for(var i in this.tokenizer=null,this.id=0,this.starterpi="",this.grammar=null,this.symbollist=[],this.privateSymbolMap={},this.privateSymbolid=1,this.emptySet={},this.firstSet={},this.firstCycle=[],this.followSet={},this.IMapCache={},this.closureMap={},this.GOTO={},this.ACTION={},this.I=[],this.id2entity={},this.entity2id={},this.starterpi=n+"_pi",this.tokenizer=new s(e,r),this.grammar=t,this.grammar[this.starterpi]=[n,[function(){}]],this.EBNFParse1(),this.EBNFParse2(),this.EBNFParse3(),this.EBNFParse4(),t){t[i][0].forEach(e=>{e.forEach(e=>{"GRAMMAR_SYM"===e.type&&this.symbollist.indexOf(e.lexeme)<0&&this.symbollist.push(e.lexeme)})}),this.id2entity[this.id]=i,this.entity2id[i]=this.id++}this.checkSymbol(e),o("privateSymbolMap",this.privateSymbolMap),o("id2entity",this.id2entity),this.symbollist.forEach(e=>{e in t||(this.emptySet[e]=!1)}),o("symbollist",this.symbollist);for(var u=this.symbollist.length;u;){var p=!1;if(this.symbollist.forEach(e=>{var r=this.empty(e);void 0!==r?this.emptySet[e]=r:p=!0}),!p)break;u--}u||this.symbollist.forEach(e=>{e in this.emptySet||(this.emptySet[e]=!1)}),o("emptySet",this.emptySet),this.symbollist.forEach(e=>{this.first(e,[])}),o("firstCycle",this.firstCycle),this.firstCycle.forEach(e=>{var r=[];e.forEach(e=>{this.firstSet[e].forEach(e=>{r.indexOf(e)<0&&r.push(e)}),this.firstSet[e]=r})}),o("first",this.firstSet),this.followSet[n]=["GRAMMAR_END"],this.symbollist.forEach(e=>{e in t&&this.follow(e)}),this.flatten(this.followSet),o("followSet",this.followSet),this.I[0]=[l(this.entity2id[this.starterpi],0,0)],this.IMapCache[this.I[0]]=0,this.items(),o("grammar",this.grammar),o("GOTO",this.GOTO),o("ACTION",this.ACTION),o("I",this.I),this.entity2id=null,this.firstCycle=null,this.privateSymbolMap=null,this.firstSet=null,this.emptySet=null,this.followSet=null,this.IMapCache=null,this.I=null,this.closureMap=null,this.symbollist=null}x.prototype=c;var h=x,m=[{lex_type:"break",lex_reg:/break/},{lex_type:"do",lex_reg:/do/},{lex_type:"instanceof",lex_reg:/instanceof/},{lex_type:"typeof",lex_reg:/typeof/},{lex_type:"case",lex_reg:/case/},{lex_type:"else",lex_reg:/else/},{lex_type:"new",lex_reg:/new/},{lex_type:"var",lex_reg:/var/},{lex_type:"catch",lex_reg:/catch/},{lex_type:"finally",lex_reg:/finally/},{lex_type:"return",lex_reg:/return/},{lex_type:"void",lex_reg:/void/},{lex_type:"continue",lex_reg:/continue/},{lex_type:"for",lex_reg:/for/},{lex_type:"switch",lex_reg:/switch/},{lex_type:"while",lex_reg:/while/},{lex_type:"debugger",lex_reg:/debugger/},{lex_type:"function",lex_reg:/function/},{lex_type:"this",lex_reg:/this/},{lex_type:"with",lex_reg:/with/},{lex_type:"default",lex_reg:/default/},{lex_type:"if",lex_reg:/if/},{lex_type:"throw",lex_reg:/throw/},{lex_type:"delete",lex_reg:/delete/},{lex_type:"in",lex_reg:/in/},{lex_type:"try",lex_reg:/try/},{lex_type:"class",lex_reg:/class/},{lex_type:"enum",lex_reg:/enum/},{lex_type:"extends",lex_reg:/extends/},{lex_type:"super",lex_reg:/super/},{lex_type:"const",lex_reg:/const/},{lex_type:"export",lex_reg:/export/},{lex_type:"import",lex_reg:/import/},{lex_type:"implements",lex_reg:/implements/},{lex_type:"let",lex_reg:/let/},{lex_type:"private",lex_reg:/private/},{lex_type:"public",lex_reg:/public/},{lex_type:"interface",lex_reg:/interface/},{lex_type:"package",lex_reg:/package/},{lex_type:"protected",lex_reg:/protected/},{lex_type:"static",lex_reg:/static/},{lex_type:"yield",lex_reg:/yield/},{lex_type:"get",lex_reg:/get/},{lex_type:"set",lex_reg:/set/},{lex_type:"NullLiteral",lex_reg:/null/},{lex_type:"BooleanLiteral",lex_reg:/(true|false)/},{lex_type:"Identifier",lex_reg:/(\$|_|[a-zA-Z])(\$|_|[0-9a-zA-Z])*/},{lex_type:"{",lex_reg:/\{/},{lex_type:"}",lex_reg:/\}/},{lex_type:"(",lex_reg:/\(/},{lex_type:")",lex_reg:/\)/},{lex_type:"[",lex_reg:/\[/},{lex_type:"]",lex_reg:/\]/},{lex_type:".",lex_reg:/\./},{lex_type:";",lex_reg:/;/},{lex_type:",",lex_reg:/,/},{lex_type:"<",lex_reg:/</},{lex_type:">",lex_reg:/>/},{lex_type:"<=",lex_reg:/<=/},{lex_type:">=",lex_reg:/>=/},{lex_type:"==",lex_reg:/==/},{lex_type:"!=",lex_reg:/!=/},{lex_type:"===",lex_reg:/===/},{lex_type:"!==",lex_reg:/!==/},{lex_type:"+",lex_reg:/\+/},{lex_type:"-",lex_reg:/-/},{lex_type:"*",lex_reg:/\*/},{lex_type:"%",lex_reg:/%/},{lex_type:"++",lex_reg:/\+\+/},{lex_type:"--",lex_reg:/--/},{lex_type:"<<",lex_reg:/<</},{lex_type:">>",lex_reg:/>>/},{lex_type:">>>",lex_reg:/>>>/},{lex_type:"&",lex_reg:/&/},{lex_type:"|",lex_reg:/|/},{lex_type:"^",lex_reg:/^/},{lex_type:"!",lex_reg:/!/},{lex_type:"~",lex_reg:/~/},{lex_type:"&&",lex_reg:/&&/},{lex_type:"||",lex_reg:/||/},{lex_type:"?",lex_reg:/\?/},{lex_type:":",lex_reg:/:/},{lex_type:"+=",lex_reg:/\+=/},{lex_type:"-=",lex_reg:/-=/},{lex_type:"*=",lex_reg:/\*=/},{lex_type:"%=",lex_reg:/%=/},{lex_type:"<<=",lex_reg:/<<=/},{lex_type:">>=",lex_reg:/>>=/},{lex_type:">>>=",lex_reg:/>>>=/},{lex_type:"&=",lex_reg:/&=/},{lex_type:"|=",lex_reg:/|=/},{lex_type:"^=",lex_reg:/\^=/},{lex_type:"/",lex_reg:/\//},{lex_type:"/=",lex_reg:/\/=/},{lex_type:"=",lex_reg:/=/},{lex_type:"NumericLiteral",lex_reg:/((0|[1-9][0-9]*)\.[0-9]*((e|E)(\+|-)?[0-9]+)?|\.[0-9]+((e|E)(\+|-)?[0-9]+)?|(0|[1-9][0-9]*)((e|E)(\+|-)?[0-9]+)?|0(x|X)[0-9a-fA-F]+)/},{lex_type:"StringLiteral",lex_reg:/("(\\"|[^"])*?"|'(\'|[^'])*?')/},{lex_type:"RegularExpressionLiteral",lex_reg:/\/(\\\/|[^/])*\/g?i?m?s?u?y?/},{lex_type:"IGNORE",lex_reg:/(\s+|\/\/.*\n|\/\*(\n|.)*?\*\/)/}];function E(){this.prev=null,this.table={},this.type=""}function _(){return this.oprs.push.apply(this.oprs,arguments),this}function y(){this.structname="",this.oprs=[],this.pushoprs=_}function g(){this.funcname="",this.scope=new E,this.params=[],this.oprs=[],this.runscope=null,this.context=null,this.prototype={constructor:this},this.call=function(e){this.context=e;for(var r=[],t=1;t<arguments.length;t++)r.push(arguments[t]);return w(this,r)},this.apply=function(e,r){return this.context=e,w(this,r)}}function R(e,r){for(var t=r;t;){if("object"==typeof t.table){if(e in t.table)return t.table}else if(void 0!==t.table[e])return t.table;t=t.prev}throw new Error(e+" is not defined")}function M(e){var r=new y;return r.structname=e,r}var A=new g,d=A.scope,v=d,b=[];var S={IdentifierName:["Identifier | ReservedWord",[function(e){var r=new y;return r.structname="id",r.oprs.push(e),r},function(){}]],ReservedWord:["break | do | instanceof | typeof | case | else | new | var | catch | finally | return | void | continue | for | switch | while | debugger | function | this | with | default | if | throw | delete | in | try | class | enum | extends | super | const | export | import | NullLiteral | BooleanLiteral",function(e){return e}],Literal:["NullLiteral | BooleanLiteral | NumericLiteral | StringLiteral | RegularExpressionLiteral",[function(e){return M("nullliter")},function(e){return M("boolliter").pushoprs(e)},function(e){return M("numliter").pushoprs(e)},function(e){return M("strliter").pushoprs(e.slice(1,e.length-1))},function(e){return M("regexpliter").pushoprs(e)}]],PrimaryExpression:["this | Identifier | Literal | ArrayLiteral | ObjectLiteral | '(' Expression ')'",[function(e){return M("this")},function(e){return M("id").pushoprs(e)},function(e){return e},function(e){return e},function(e){return e},function(e,r,t){return r}]],ArrayLiteral:["'[' Elision ? ']' | '[' ElementList ']' | '[' ElementList ',' Elision ? ']'",[function(e,r,t){var n=M("arrliter");if("GRAMMAR_EMPTY"!=r)for(var i=0;i<r.length;i++)n.oprs.push(void 0);return n},function(e,r,t){var n=M("arrliter");return n.oprs=r,n},function(e,r,t,n,i){var s=M("arrliter");if(s.oprs=r,"GRAMMAR_EMPTY"!=n)for(var o=0;o<n.length;o++)s.oprs.push(void 0);return s}]],ElementList:["Elision ? AssignmentExpression | ElementList ',' Elision ? AssignmentExpression",[function(e,r){var t=[];if("GRAMMAR_EMPTY"!=e)for(var n=0;n<e.length;n++)t.push(void 0);return t.push(r),t},function(e,r,t,n){if("GRAMMAR_EMPTY"!=t)for(var i=0;i<t.length;i++)e.push(void 0);return e.push(n),e}]],Elision:["',' | Elision ','",[function(e){return[e]},function(e,r){return e.push(r),e}]],ObjectLiteral:["'{' '}' | '{' PropertyNameAndValueList '}' | '{' PropertyNameAndValueList ',' '}'",[function(){return M("objliter")},function(e,r){var t=M("objliter");return t.oprs=r,t},function(e,r){var t=M("objliter");return t.oprs=r,t}]],PropertyNameAndValueList:["PropertyAssignment | PropertyNameAndValueList ',' PropertyAssignment",[function(e){return[e]},function(e,r,t){return e.push(t),e}]],PropertyAssignment:["PropertyName ':' AssignmentExpression | get PropertyName '(' ')' '{' FunctionBody '}' | set PropertyName '(' PropertySetParameterList ')' '{' FunctionBody '}'",[function(e,r,t){return M("propertyassignment").pushoprs(e,t)}]],PropertyName:["IdentifierName | StringLiteral | NumericLiteral",[function(e){return e},function(e){return M("strliter").pushoprs(e.slice(1,e.length-1))},function(e){return M("numliter").pushoprs(e)}]],PropertySetParameterList:["Identifier",function(e){return M("id").pushoprs(e)}],MemberExpression:["PrimaryExpression | FunctionExpression | MemberExpression '[' Expression ']' | MemberExpression '.' IdentifierName | new MemberExpression Arguments",[function(e){return e},function(e){return e},function(e,r,t,n){return M("memberexp").pushoprs(e,t)},function(e,r,t){return M("memberexp").pushoprs(e,t)},function(e,r,t){return M("new").pushoprs(r,t)}]],NewExpression:["MemberExpression | new NewExpression",[function(e){return e},function(e,r){return M("new").pushoprs(r)}]],CallExpression:["MemberExpression Arguments | CallExpression Arguments | CallExpression '[' Expression ']' | CallExpression '.' IdentifierName",[function(e,r){return M("call").pushoprs(e,r)},function(e,r){return M("call").pushoprs(e,r)},function(e,r,t,n){return M("callgetmember").pushoprs(e,t)},function(e,r,t){return M("callgetmember").pushoprs(e,t)}]],Arguments:["'(' ')' | '(' ArgumentList ')'",[function(){return M("args")},function(e,r,t){var n=M("args");return n.oprs=r,n}]],ArgumentList:["AssignmentExpression | ArgumentList ',' AssignmentExpression",[function(e){return[e]},function(e,r,t){return e.push(t),e}]],LeftHandSideExpression:["NewExpression | CallExpression",function(e){return e}],PostfixExpression:["LeftHandSideExpression | LeftHandSideExpression '++' | LeftHandSideExpression '--'",[function(e){return e},function(e){return M("post++").pushoprs(e)},function(e){return M("post--").pushoprs(e)}]],UnaryExpression:["PostfixExpression | delete UnaryExpression | void UnaryExpression | typeof UnaryExpression | '++' UnaryExpression | '--' UnaryExpression | '+' UnaryExpression | '-' UnaryExpression | '~' UnaryExpression | '!' UnaryExpression",[function(e){return e},function(e,r){return M("delete").pushoprs(r)},function(e,r){return M("void").pushoprs(r)},function(e,r){return M("typeof").pushoprs(r)},function(e,r){return M("prefix++").pushoprs(r)},function(e,r){return M("prefix--").pushoprs(r)},function(e,r){return M("positive").pushoprs(r)},function(e,r){return M("negative").pushoprs(r)},function(e,r){return M("~").pushoprs(r)},function(e,r){return M("!").pushoprs(r)}]],MultiplicativeExpression:["UnaryExpression | MultiplicativeExpression '*' UnaryExpression | MultiplicativeExpression '/' UnaryExpression | MultiplicativeExpression '%' UnaryExpression",[function(e){return e},function(e,r,t){return M("*").pushoprs(e,t)},function(e,r,t){return M("/").pushoprs(e,t)},function(e,r,t){return M("%").pushoprs(e,t)}]],AdditiveExpression:["MultiplicativeExpression | AdditiveExpression '+' MultiplicativeExpression | AdditiveExpression '-' MultiplicativeExpression",[function(e){return e},function(e,r,t){return M("+").pushoprs(e,t)},function(e,r,t){return M("-").pushoprs(e,t)}]],ShiftExpression:["AdditiveExpression | ShiftExpression '<<' AdditiveExpression | ShiftExpression '>>' AdditiveExpression | ShiftExpression '>>>' AdditiveExpression",[function(e){return e},function(e,r,t){return M("<<").pushoprs(e,t)},function(e,r,t){return M(">>").pushoprs(e,t)},function(e,r,t){return M(">>>").pushoprs(e,t)}]],RelationalExpression:["ShiftExpression | RelationalExpression '<' ShiftExpression | RelationalExpression '>' ShiftExpression | RelationalExpression '<=' ShiftExpression | RelationalExpression '>=' ShiftExpression | RelationalExpression instanceof ShiftExpression | RelationalExpression in ShiftExpression",[function(e){return e},function(e,r,t){return M("<").pushoprs(e,t)},function(e,r,t){return M(">").pushoprs(e,t)},function(e,r,t){return M("<=").pushoprs(e,t)},function(e,r,t){return M(">=").pushoprs(e,t)},function(e,r,t){return M("instanceof").pushoprs(e,t)},function(e,r,t){return M("in").pushoprs(e,t)}]],RelationalExpressionNoIn:["ShiftExpression | RelationalExpressionNoIn '<' ShiftExpression | RelationalExpressionNoIn '>' ShiftExpression | RelationalExpressionNoIn '<=' ShiftExpression | RelationalExpressionNoIn '>=' ShiftExpression | RelationalExpressionNoIn instanceof ShiftExpression",[function(e){return e},function(e,r,t){return M("<").pushoprs(e,t)},function(e,r,t){return M(">").pushoprs(e,t)},function(e,r,t){return M("<=").pushoprs(e,t)},function(e,r,t){return M(">=").pushoprs(e,t)},function(e,r,t){return M("instanceof").pushoprs(e,t)}]],EqualityExpression:["RelationalExpression | EqualityExpression '==' RelationalExpression | EqualityExpression '!=' RelationalExpression | EqualityExpression '===' RelationalExpression | EqualityExpression '!==' RelationalExpression",[function(e){return e},function(e,r,t){return M("==").pushoprs(e,t)},function(e,r,t){return M("!=").pushoprs(e,t)},function(e,r,t){return M("===").pushoprs(e,t)},function(e,r,t){return M("!==").pushoprs(e,t)}]],EqualityExpressionNoIn:["RelationalExpressionNoIn | EqualityExpressionNoIn '==' RelationalExpressionNoIn | EqualityExpressionNoIn '!=' RelationalExpressionNoIn | EqualityExpressionNoIn '===' RelationalExpressionNoIn | EqualityExpressionNoIn '!==' RelationalExpressionNoIn",[function(e){return e},function(e,r,t){return M("==").pushoprs(e,t)},function(e,r,t){return M("!=").pushoprs(e,t)},function(e,r,t){return M("===").pushoprs(e,t)},function(e,r,t){return M("!==").pushoprs(e,t)}]],BitwiseANDExpression:["EqualityExpression | BitwiseANDExpression '&' EqualityExpression",[function(e){return e},function(e,r,t){return M("&").pushoprs(e,t)}]],BitwiseANDExpressionNoIn:["EqualityExpressionNoIn | BitwiseANDExpressionNoIn '&' EqualityExpressionNoIn",[function(e){return e},function(e,r,t){return M("&").pushoprs(e,t)}]],BitwiseXORExpression:["BitwiseANDExpression | BitwiseXORExpression '^' BitwiseANDExpression",[function(e){return e},function(e,r,t){return M("^").pushoprs(e,t)}]],BitwiseXORExpressionNoIn:["BitwiseANDExpressionNoIn | BitwiseXORExpressionNoIn '^' BitwiseANDExpressionNoIn",[function(e){return e},function(e,r,t){return M("^").pushoprs(e,t)}]],BitwiseORExpression:["BitwiseXORExpression | BitwiseORExpression '|' BitwiseXORExpression",[function(e){return e},function(e,r,t){return M("|").pushoprs(e,t)}]],BitwiseORExpressionNoIn:["BitwiseXORExpressionNoIn | BitwiseORExpressionNoIn '|' BitwiseXORExpressionNoIn",[function(e){return e},function(e,r,t){return M("|").pushoprs(e,t)}]],LogicalANDExpression:["BitwiseORExpression | LogicalANDExpression '&&' BitwiseORExpression",[function(e){return e},function(e,r,t){return M("&&").pushoprs(e,t)}]],LogicalANDExpressionNoIn:["BitwiseORExpressionNoIn | LogicalANDExpressionNoIn '&&' BitwiseORExpressionNoIn",[function(e){return e},function(e,r,t){return M("&&").pushoprs(e,t)}]],LogicalORExpression:["LogicalANDExpression | LogicalORExpression '||' LogicalANDExpression",[function(e){return e},function(e,r,t){return M("||").pushoprs(e,t)}]],LogicalORExpressionNoIn:["LogicalANDExpressionNoIn | LogicalORExpressionNoIn '||' LogicalANDExpressionNoIn",[function(e){return e},function(e,r,t){return M("||").pushoprs(e,t)}]],ConditionalExpression:["LogicalORExpression | LogicalORExpression '?' AssignmentExpression ':' AssignmentExpression",[function(e){return e},function(e,r,t,n,i){return M("condexp").pushoprs(e,t,i)}]],ConditionalExpressionNoIn:["LogicalORExpressionNoIn | LogicalORExpressionNoIn '?' AssignmentExpression ':' AssignmentExpressionNoIn",[function(e){return e},function(e,r,t,n,i){return M("condexp").pushoprs(e,t,i)}]],AssignmentExpression:["ConditionalExpression | LeftHandSideExpression '=' AssignmentExpression | LeftHandSideExpression AssignmentOperator AssignmentExpression",[function(e){return e},function(e,r,t){return M("=").pushoprs(e,t)},function(e,r,t){return M(r).pushoprs(e,t)}]],AssignmentExpressionNoIn:["ConditionalExpressionNoIn | LeftHandSideExpression '=' AssignmentExpressionNoIn | LeftHandSideExpression AssignmentOperator AssignmentExpressionNoIn",[function(e){return e},function(e,r,t){return M("=").pushoprs(e,t)},function(e,r,t){return M(r).pushoprs(e,t)}]],AssignmentOperator:["'*=' | '/=' | '%=' | '+=' | '-=' | '<<=' | '>>=' | '>>>=' | '&=' | '^=' | '|='",[function(){return"*="},function(){return"/="},function(){return"%="},function(){return"+="},function(){return"-="},function(){return"<<="},function(){return">>="},function(){return">>>="},function(){return"&="},function(){return"^="},function(){return"|="}]],Expression:["AssignmentExpression | Expression ',' AssignmentExpression",[function(e){return M("exp").pushoprs(e)},function(e,r,t){return e.oprs.push(t),e}]],ExpressionNoIn:["AssignmentExpressionNoIn | ExpressionNoIn ',' AssignmentExpressionNoIn",[function(e){return[e]},function(e,r){return e.push(r),e}]],Statement:["Block | VariableStatement | EmptyStatement | ExpressionStatement | IfStatement | IterationStatement | ContinueStatement | BreakStatement | ReturnStatement | WithStatement | LabelledStatement | SwitchStatement | ThrowStatement | TryStatement | DebuggerStatement",function(e){return e}],Block:["'{' StatementList ? '}'",[function(e,r,t){return"GRAMMAR_EMPTY"==r?[]:r}]],StatementList:["Statement | StatementList Statement",[function(e){return e instanceof Array?e:[e]},function(e,r){return e.push(r),e}]],VariableStatement:["var VariableDeclarationList ';' ?",function(e,r,t){return r}],VariableDeclarationList:["VariableDeclaration | VariableDeclarationList ',' VariableDeclaration",[function(e){return e?[e]:[]},function(e,r,t){return t&&e.push(t),e}]],VariableDeclarationListNoIn:["VariableDeclarationNoIn | VariableDeclarationListNoIn ',' VariableDeclarationNoIn",[function(e){return e?[e]:[]},function(e,r,t){return t&&e.push(t),e}]],VariableDeclaration:["Identifier Initialiser ?",[function(e,r){if(v.table[e]=void 0,"GRAMMAR_EMPTY"!=r){var t=M("init"),n=M("id").pushoprs(e);return t.oprs.push(n),t.oprs.push(r),t}return M("id").pushoprs(e)}]],VariableDeclarationNoIn:["Identifier InitialiserNoIn ?",[function(e,r){if(v.table[e]=void 0,"GRAMMAR_EMPTY"!=r){var t=M("init"),n=M("id").pushoprs(e);return t.oprs.push(n),t.oprs.push(r),t}return M("id").pushoprs(e)}]],Initialiser:["'=' AssignmentExpression",function(e,r){return r}],InitialiserNoIn:["'=' AssignmentExpressionNoIn",function(e,r){return r}],EmptyStatement:["';'",function(){return M("empty")}],ExpressionStatement:["Expression ';' ?",[function(e,r){return e}]],IfStatement:["if '(' Expression ')' Statement else Statement | if '(' Expression ')' Statement",[function(e,r,t,n,i,s,o){return M("ifelse").pushoprs(t,i,o)},function(e,r,t,n,i){return M("if").pushoprs(t,i)}]],IterationStatement:["do Statement while '(' Expression ')' ';' ? | while '(' Expression ')' Statement | for '(' ExpressionNoIn ? ';' Expression ? ';' Expression ? ')' Statement | for '(' var VariableDeclarationListNoIn ';' Expression ? ';' Expression ? ')' Statement | for '(' LeftHandSideExpression in Expression ')' Statement | for '(' var VariableDeclarationNoIn in Expression ')' Statement",[function(e,r,t,n,i,s){return M("dowhile").pushoprs(i,r)},function(e,r,t,n,i){return M("while").pushoprs(t,i)},function(e,r,t,n,i,s,o,u,p){var l=new y;return l.structname="for","GRAMMAR_EMPTY"==t&&(t=null),"GRAMMAR_EMPTY"==i&&(i=null),"GRAMMAR_EMPTY"==o&&(o=null),l.oprs.push([t,i,o]),l.oprs.push(p),l},function(e,r,t,n,i,s,o,u,p,l){var a=new y;return a.structname="for","GRAMMAR_EMPTY"==s&&(s=null),"GRAMMAR_EMPTY"==u&&(u=null),a.oprs.push([n,s,u]),a.oprs.push(l),a},function(e,r,t,n,i,s,o){return M("forin").pushoprs([t,i],o)},function(e,r,t,n,i,s,o,u){return M("forin").pushoprs([n,s],u)}]],ContinueStatement:["continue ';' ? | continue Identifier ';' ?",function(){return M("continue")}],BreakStatement:["break ';' ? | break Identifier ';' ?",function(e){return M("break")}],ReturnStatement:["return ';' ? | return Expression ';' ?",[function(e){return M("return")},function(e,r,t){return M("return").pushoprs(r)}]],WithStatement:["with '(' Expression ')' Statement",function(e,r,t,n,i){return M("with").pushoprs(t,i)}],SwitchStatement:["switch '(' Expression ')' CaseBlock",function(e,r,t,n,i){return M("switch").pushoprs(t,i)}],CaseBlock:["'{' CaseClauses ? '}' | '{' CaseClauses ? DefaultClause ? '}' | '{' CaseClauses ? DefaultClause ? CaseClauses '}'",[function(e,r,t){return"GRAMMAR_EMPTY"==r?[]:r},function(e,r,t,n){var i=[];return"GRAMMAR_EMPTY"!=r&&(i=i.concat(r)),"GRAMMAR_EMPTY"!=t&&i.push(t),i},function(e,r,t,n,i){var s=[];return"GRAMMAR_EMPTY"!=r&&(s=s.concat(r)),"GRAMMAR_EMPTY"!=t&&s.push(t),s=s.concat(n)}]],CaseClauses:["CaseClause | CaseClauses CaseClause",[function(e){return[e]},function(e,r){return e.push(r),e}]],CaseClause:["case Expression ':' StatementList ?",function(e,r,t,n){var i=M("case").pushoprs(r);return"GRAMMAR_EMPTY"!=n&&i.oprs.push(n),i}],DefaultClause:["default ':' StatementList ?",function(e,r,t){var n=M("default");return"GRAMMAR_EMPTY"!=t&&n.oprs.push(t),n}],LabelledStatement:["Identifier ':' Statement"],ThrowStatement:["throw Expression ';' ?"],TryStatement:["try Block Catch | try Block Finally | try Block Catch Finally"],Catch:["catch '(' Identifier ')' Block"],Finally:["finally Block"],DebuggerStatement:["debugger ';' ?"],FuncDef:["function",function(){var e=new g;e.scope.prev=v,v=e.scope,b.push(e)}],FunctionDeclaration:["FuncDef Identifier '(' FormalParameterList ? ')' '{' FunctionBody '}'",function(e,r,t,n,i,s,o,u){var p=b[b.length-1];"GRAMMAR_EMPTY"!=n&&(p.params=n),p.oprs=o,p.funcname=r,v.prev.table[r]=p,v=v.prev,b.pop()}],FunctionExpression:["FuncDef Identifier ? '(' FormalParameterList ? ')' '{' FunctionBody '}'",function(e,r,t,n,i,s,o,u){"GRAMMAR_EMPTY"==r&&(r=function(){for(var e="abcdefghijklmnopqrstuvwsyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=e.length,t="",n=0;n<5;n++)t+=e[parseInt(Math.random()*r)];return"nickfunc_"+t}());var p=b[b.length-1];return"GRAMMAR_EMPTY"!=n&&(p.params=n),p.oprs=o,p.funcname=r,v.prev.table[r]=p,v=v.prev,b.pop(),M("id").pushoprs(r)}],FormalParameterList:["Identifier | FormalParameterList ',' Identifier",[function(e){return[M("id").pushoprs(e)]},function(e,r,t){return e.push(t),e}]],FunctionBody:["SourceElements ?",function(e){return"GRAMMAR_EMPTY"==e?[]:e}],Program:["SourceElements ?",function(e){return A.oprs=e,e}],SourceElements:["SourceElement | SourceElements SourceElement",[function(e){var r=[];return e&&(e instanceof Array?r=r.concat(e):r.push(e)),r},function(e,r){return r&&(r instanceof Array?e=e.concat(r):e.push(r)),e}]],SourceElement:["Statement | FunctionDeclaration",function(e){return e}]};function w(e,r){r=r||[];var t=new E;for(var n in e.scope.table){t.table[n]=e.scope.table[n];var i=t.table[n];if(i instanceof g){var s=new g;s.funcname=i.funcname,s.scope=i.scope,s.params=i.params,s.oprs=i.oprs,s.runscope=t,s.prototype=i.prototype,t.table[n]=s}}t.table.this=e.context,t.prev=e.runscope||d;for(var o=0;o<e.params.length;o++)t.table[e.params[o].oprs[0]]=r[o];for(o=0;o<e.oprs.length;o++){var u=N(e.oprs[o],t);if(u&&"return"==u.op)return u.v}}function N(e,r){if("ifelse"==e.structname){n=I(e.oprs[0],r)?e.oprs[1]:e.oprs[2];for(var t=0;t<n.length;t++){if((h=N(n[t],r))&&"return"==h.op)return h}}else if("if"==e.structname){if(I(e.oprs[0],r)){var n=e.oprs[1];for(t=0;t<n.length;t++){if((h=N(n[t],r))&&"return"==h.op)return h}}}else if("switch"==e.structname){var i=I(e.oprs[0],r),s=-1,o=-1;if(!(n=e.oprs[1])||!n.length)return;for(t=0;t<n.length;t++){if("case"==n[t].structname)if((l=I(n[t].oprs[0],r))===i){s=t;break}"default"==n[t].structname&&(o=t)}if(-1==s&&-1!=o&&(s=o),s>=0)for(t=s;t<n.length;t++){var u=1;if("default"==n[t].structname&&(u=0),n[t].oprs[u]&&n[t].oprs[u].length>0)for(var p=0;p<n[t].oprs[u].length;p++){if((h=N(n[t].oprs[u][p],r))&&"break"==h.op)return;if(h&&"return"==h.op)return h}}}else if("with"==e.structname){var l=I(e.oprs[0],r),a=new E;a.prev=r,a.table=l,a.type="with";var f=e.oprs[1];for(t=0;t<f.length;t++){if(h=N(f[t],a)){if("break"==h.op)return;if("continue"==h.op)continue;if("return"==h.op)return h}}}else if("for"==e.structname){n=e.oprs[0],f=e.oprs[1];if(n[0]instanceof Array)for(t=0;t<n[0].length;t++)N(n[0][t],r);else n[0]&&N(n[0],r);for(;;){if(n[1])if(!(i=I(n[1],r)))break;for(t=0;t<f.length;t++){if(h=N(f[t],r)){if("break"==h.op)return;if("continue"==h.op)continue;if("return"==h.op)return h}}n[2]&&I(n[2],r)}}else if("forin"==e.structname){var c;n=e.oprs[0],f=e.oprs[1];"id"==n[0].structname?c=R(m=n[0].oprs[0],r):"memberexp"==n[0].structname&&(c=I(n[0].oprs[0],r),m="id"==n[0].oprs[1].structname?n[0].oprs[1].oprs[0]:I(n[0].oprs[1],r));i=I(n[1],r);for(var x in i){c[m]=x;for(t=0;t<f.length;t++){if(h=N(f[t],r)){if("break"==h.op)break;if("continue"==h.op)continue;if("return"==h.op)return h}}}}else if("while"==e.structname)for(n=e.oprs[1];;){if(0==(i=I(e.oprs[0],r)))break;if(n&&n.length)for(t=0;t<n.length;t++){if((h=N(n[t],r))&&"break"==h.op)return;if(h&&"continue"==h.op)break;if(h&&"return"==h.op)return h}}else if("dowhile"==e.structname)for(n=e.oprs[1];;){if(n&&n.length)for(t=0;t<n.length;t++){if((h=N(n[t],r))&&"break"==h.op)return;if(h&&"continue"==h.op)break;if(h&&"return"==h.op)return h}if(0==(i=I(e.oprs[0],r)))break}else{if("continue"==e.structname)return{op:"continue"};if("break"==e.structname)return{op:"break"};if("return"==e.structname){var h={op:"return"};return e.oprs[0]&&(h.v=I(e.oprs[0],r)),h}if("init"==e.structname){for(var m=e.oprs[0].oprs[0],_=r;_;){if("object"==typeof _.table){if(m in _.table){i=I(e.oprs[1],r);_.table[m]=i;break}}else if(void 0!==_.table[m]){i=I(e.oprs[1],r);_.table[m]=i;break}_=_.prev}if(!e)throw new Error(m+" is not defined")}else"exp"==e.structname&&I(e,r)}}function I(e,r){if("exp"==e.structname){for(var t,n=0;n<e.oprs.length;n++)t=I(e.oprs[n],r);return t}if("memberexp"==e.structname)return(o=I(e.oprs[0],r))[h="id"==e.oprs[1].structname?e.oprs[1].oprs[0]:I(e.oprs[1],r)];if("id"==e.structname)return R(h=e.oprs[0],r)[h];if("this"==e.structname)return r.table.this;if("numliter"==e.structname)return parseFloat(e.oprs[0]);if("strliter"==e.structname)return e.oprs[0];if("regexpliter"==e.structname){for(var i=e.oprs[0],s=i.length-1;s>=0&&"/"!=i[s];)s--;return new RegExp(i.substring(1,s),i.substring(s+1))}if("boolliter"==e.structname)return"true"==e.oprs[0];if("nullliter"==e.structname)return null;if("objliter"==e.structname){var o={},u=e.oprs;for(n=0;n<u.length;n++){x="id"==u[n].oprs[0].structname?u[n].oprs[0].oprs[0]:I(u[n].oprs[0],r);var p=I(u[n].oprs[1],r);o[x]=p}return o}if("arrliter"==e.structname){u=e.oprs;var l=[];for(n=0;n<u.length;n++)u[n]?l.push(I(u[n],r)):l.push(void 0);return l}if("new"==e.structname){if((a=I(e.oprs[0],r))instanceof g){o={};return a.context=o,w(a,e.oprs[1]||[]),o.__proto__=a.prototype,o}throw new Error("not a constructor")}if("call"==e.structname){var a=I(e.oprs[0],r),f=null;f="memberexp"==e.oprs[0].structname?I(e.oprs[0].oprs[0],r):"with"==r.type?r.table:d;var c=[];for(n=0;n<e.oprs[1].oprs.length;n++)c.push(I(e.oprs[1].oprs[n],r));if(a instanceof g)return a.context=f,m=w(a,c);if(a instanceof Function)return a.apply(f,c)}else{if("callgetmember"==e.structname)return(m=I(e.oprs[0],r))[h="id"==e.oprs[1].structname?e.oprs[1].oprs[0]:I(e.oprs[1],r)];if("condexp"==e.structname){var x=I(e.oprs[0],r);return I(x?e.oprs[1]:e.oprs[2],r)}if("typeof"!=e.structname&&"="!=e.structname&&(x=I(e.oprs[0],r)),e.oprs[1]&&"delete"!=e.structname&&(p=I(e.oprs[1],r)),"+"==e.structname)return x+p;if("-"==e.structname)return x-p;if("*"==e.structname)return x*p;if("/"==e.structname)return x/p;if("%"==e.structname)return x%p;if(">"==e.structname)return x>p;if(">="==e.structname)return x>=p;if("<"==e.structname)return x<p;if("<="==e.structname)return x<=p;if("=="==e.structname)return x==p;if("!="==e.structname)return x!=p;if("==="==e.structname)return x===p;if("&"==e.structname)return x&p;if("^"==e.structname)return x^p;if("|"==e.structname)return x|p;if("&&"==e.structname)return x&&p;if("||"==e.structname)return x||p;if("instanceof"==e.structname)return x.__proto__===p.prototype;if("in"==e.structname)return p.hasOwnProperty(x);if("delete"==e.structname)return"memberexp"==e.oprs[0].structname&&(delete(x=I(e.oprs[0].oprs[0],r))[p="id"==e.oprs[0].oprs[1].structname?e.oprs[0].oprs[1].oprs[0]:I(e.oprs[0].oprs[1],r)],!0);if("void"==e.structname)return;if("typeof"!=e.structname){if("positive"==e.structname)return+x;if("negative"==e.structname)return-x;if("~"==e.structname)return~x;if("!"==e.structname)return!x;if("id"!=e.oprs[0].structname&&"memberexp"!=e.oprs[0].structname)throw new Error("Invalid left-hand side in assignment");var h;if("id"==e.oprs[0].structname){h=e.oprs[0].oprs[0];try{o=R(h,r)}catch(r){if("="!=e.structname)throw r;o=d.table}}else o=I(e.oprs[0].oprs[0],r),h="id"==e.oprs[0].oprs[1].structname?e.oprs[0].oprs[1].oprs[0]:I(e.oprs[0].oprs[1],r);if("="==e.structname)o[h]=p;else if("*="==e.structname)o[h]=x*p;else if("/="==e.structname)o[h]=x/p;else if("%="==e.structname)o[h]=x%p;else if("+="==e.structname)o[h]=x+p;else if("-="==e.structname)o[h]=x-p;else if("<<="==e.structname)o[h]=x<<p;else if(">>="==e.structname)o[h]=x>>p;else if(">>>="==e.structname)o[h]=x>>>p;else if("&="==e.structname)o[h]=x&p;else if("^="==e.structname)o[h]=x^p;else if("|="==e.structname)o[h]=x|p;else if("prefix++"==e.structname)++o[h];else{if("prefix--"!=e.structname){if("post++"==e.structname){var m=o[h];return o[h]++,m}if("post--"==e.structname){m=o[h];return o[h]--,m}throw new Error("Unknown Operator")}--o[h]}return o[h]}try{return typeof(x=I(e.oprs[0],r))}catch(e){return"undefined"}}}function O(){var e=new h(m,s.priority.LONG_FIRST,S,"Program");this.set=function(e,r){d.table[e]=r},this.run=function(r){e.parse(r),console.log(d);for(var t=0;t<A.oprs.length;t++)N(A.oprs[t],d)}}}])}));